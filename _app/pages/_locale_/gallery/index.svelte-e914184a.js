import{S as U,i as B,s as A,e as v,w as N,c as E,a as I,x as M,d as u,b as k,g as w,y as P,W as j,q as d,o as p,B as C,K as oe,M as V,k as L,m as T,H as z,N as F,O as J,P as K,a4 as he,C as q,_ as $,G as x,z as Q,a5 as _e,I as g,a0 as ee,a1 as de,f as te,n as ce,p as fe,J as ge,A as ue,t as pe,h as ke,j as be,E as ye,Q as we,a6 as Se,a7 as ve,a8 as Ee,a9 as Ie,l as D,aa as ze,ab as le,ac as se,ad as Ne}from"../../../chunks/vendor-bff07850.js";import{h as W,i as Me,j as Pe,k as R,p as Ce}from"../../../chunks/timeline.module-cb7c36d6.js";import{L as Ge}from"../../../chunks/Link-90966869.js";import{P as Le}from"../../../chunks/PageMeta-f0d69a19.js";import{I as Te}from"../../../chunks/Icon-ce5b6925.js";import{c as je}from"../../../chunks/default-c9b5f240.js";import{p as qe,f as Ue}from"../../../chunks/util-bb0d5d53.js";import"../../../chunks/Meta-0ad45a8f.js";function Be({width:n,height:e},s=400){return`
		--column-end: span ${Math.floor(n/s)};
		--row-end: span ${Math.floor(e/s)};
	`}const Ae=n=>({}),ae=n=>({});function De(n){let e,s,r,l;const a=n[6].default,t=V(a,n,n[8],null),o=n[6].caption,i=V(o,n,n[8],ae);return{c(){e=v("figure"),t&&t.c(),s=L(),r=v("figcaption"),i&&i.c(),this.h()},l(c){e=E(c,"FIGURE",{class:!0});var f=I(e);t&&t.l(f),s=T(f),r=E(f,"FIGCAPTION",{});var b=I(r);i&&i.l(b),b.forEach(u),f.forEach(u),this.h()},h(){k(e,"class",W.figure)},m(c,f){w(c,e,f),t&&t.m(e,null),z(e,s),z(e,r),i&&i.m(r,null),l=!0},p(c,f){t&&t.p&&(!l||f&256)&&F(t,a,c,c[8],l?K(a,c[8],f,null):J(c[8]),null),i&&i.p&&(!l||f&256)&&F(i,o,c,c[8],l?K(o,c[8],f,Ae):J(c[8]),ae)},i(c){l||(d(t,c),d(i,c),l=!0)},o(c){p(t,c),p(i,c),l=!1},d(c){c&&u(e),t&&t.d(c),i&&i.d(c)}}}function Oe(n){let e,s,r,l,a;return s=new Ge({props:{href:n[1](n[0].toString()),$$slots:{default:[De]},$$scope:{ctx:n}}}),{c(){e=v("li"),N(s.$$.fragment),this.h()},l(t){e=E(t,"LI",{class:!0,style:!0});var o=I(e);M(s.$$.fragment,o),o.forEach(u),this.h()},h(){k(e,"class",W["gallery-item"]),k(e,"style",n[2])},m(t,o){w(t,e,o),P(s,e,null),r=!0,l||(a=j(e,"click",n[7]),l=!0)},p(t,[o]){const i={};o&3&&(i.href=t[1](t[0].toString())),o&256&&(i.$$scope={dirty:o,ctx:t}),s.$set(i)},i(t){r||(d(s.$$.fragment,t),r=!0)},o(t){p(s.$$.fragment,t),r=!1},d(t){t&&u(e),C(s),l=!1,a()}}}function He(n,e,s){let r;oe(n,Me,m=>s(1,r=m));let{$$slots:l={},$$scope:a}=e,{cellScale:t=400}=e,{id:o}=e,{width:i}=e,{height:c}=e,f=Be({width:i,height:c},t);function b(m){he.call(this,n,m)}return n.$$set=m=>{"cellScale"in m&&s(3,t=m.cellScale),"id"in m&&s(0,o=m.id),"width"in m&&s(4,i=m.width),"height"in m&&s(5,c=m.height),"$$scope"in m&&s(8,a=m.$$scope)},[o,r,f,t,i,c,l,b,a]}class Re extends U{constructor(e){super();B(this,e,He,Oe,A,{cellScale:3,id:0,width:4,height:5})}}function Ve(n){let e,s,r,l,a,t,o=[{alt:n[0]},{class:n[1]},{height:n[2]},{loading:r=n[3]?"lazy":void 0},{src:l=n[4]},{width:n[6]},n[8]],i={};for(let c=0;c<o.length;c+=1)i=q(i,o[c]);return{c(){e=v("picture"),s=v("img"),this.h()},l(c){e=E(c,"PICTURE",{class:!0,style:!0});var f=I(e);s=E(f,"IMG",{alt:!0,class:!0,height:!0,loading:!0,src:!0,width:!0}),f.forEach(u),this.h()},h(){$(s,i),x(s,"error",n[7]),k(e,"class",Pe.picture),k(e,"style",n[5])},m(c,f){w(c,e,f),z(e,s),a||(t=j(s,"error",n[9]),a=!0)},p(c,[f]){$(s,i=Q(o,[f&1&&{alt:c[0]},f&2&&{class:c[1]},f&4&&{height:c[2]},f&8&&r!==(r=c[3]?"lazy":void 0)&&{loading:r},f&16&&!_e(s.src,l=c[4])&&{src:l},f&64&&{width:c[6]},f&256&&c[8]])),x(s,"error",c[7]),f&32&&k(e,"style",c[5])},i:g,o:g,d(c){c&&u(e),a=!1,t()}}}function Fe(n,e,s){const r=["alt","className","height","lazy","src","style","width"];let l=ee(e,r),{alt:a}=e,{className:t=""}=e,{height:o}=e,{lazy:i=!1}=e,{src:c}=e,{style:f=""}=e,{width:b}=e,m=!1;const G=()=>s(7,m=!0);return n.$$set=h=>{e=q(q({},e),de(h)),s(8,l=ee(e,r)),"alt"in h&&s(0,a=h.alt),"className"in h&&s(1,t=h.className),"height"in h&&s(2,o=h.height),"lazy"in h&&s(3,i=h.lazy),"src"in h&&s(4,c=h.src),"style"in h&&s(5,f=h.style),"width"in h&&s(6,b=h.width)},[a,t,o,i,c,f,b,m,l,G]}class me extends U{constructor(e){super();B(this,e,Fe,Ve,A,{alt:0,className:1,height:2,lazy:3,src:4,style:5,width:6})}}function ne(n,e,s){const r=n.slice();r[4]=e[s];const l=r[4];return r[5]=l.id,r[6]=l.width!==void 0?l.width:400,r[7]=l.height!==void 0?l.height:400,r[8]=l.title,r}function Je(n){let e,s,r;const l=[{src:n[2](n[4])},n[4]];let a={};for(let t=0;t<l.length;t+=1)a=q(a,l[t]);return e=new me({props:a}),{c(){N(e.$$.fragment),s=L()},l(t){M(e.$$.fragment,t),s=T(t)},m(t,o){P(e,t,o),w(t,s,o),r=!0},p(t,o){const i=o&12?Q(l,[{src:t[2](t[4])},o&8&&ue(t[4])]):{};e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){p(e.$$.fragment,t),r=!1},d(t){C(e,t),t&&u(s)}}}function Ke(n){let e=n[8]+"",s,r;return{c(){s=pe(e),r=L()},l(l){s=ke(l,e),r=T(l)},m(l,a){w(l,s,a),w(l,r,a)},p(l,a){a&8&&e!==(e=l[8]+"")&&be(s,e)},d(l){l&&u(s),l&&u(r)}}}function ie(n){let e,s;return e=new Re({props:{id:n[5],cellScale:n[0],width:n[6],height:n[7],$$slots:{caption:[Ke],default:[Je]},$$scope:{ctx:n}}}),{c(){N(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,l){P(e,r,l),s=!0},p(r,l){const a={};l&8&&(a.id=r[5]),l&1&&(a.cellScale=r[0]),l&8&&(a.width=r[6]),l&8&&(a.height=r[7]),l&2060&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){s||(d(e.$$.fragment,r),s=!0)},o(r){p(e.$$.fragment,r),s=!1},d(r){C(e,r)}}}function Qe(n){let e,s,r=n[3],l=[];for(let t=0;t<r.length;t+=1)l[t]=ie(ne(n,r,t));const a=t=>p(l[t],1,1,()=>{l[t]=null});return{c(){e=v("ul");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=E(t,"UL",{class:!0,style:!0});var o=I(e);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(u),this.h()},h(){k(e,"class",W.gallery),te(e,"--cell-size",n[1]+"px")},m(t,o){w(t,e,o);for(let i=0;i<l.length;i+=1)l[i].m(e,null);s=!0},p(t,[o]){if(o&13){r=t[3];let i;for(i=0;i<r.length;i+=1){const c=ne(t,r,i);l[i]?(l[i].p(c,o),d(l[i],1)):(l[i]=ie(c),l[i].c(),d(l[i],1),l[i].m(e,null))}for(ce(),i=r.length;i<l.length;i+=1)a(i);fe()}(!s||o&2)&&te(e,"--cell-size",t[1]+"px")},i(t){if(!s){for(let o=0;o<r.length;o+=1)d(l[o]);s=!0}},o(t){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)p(l[o]);s=!1},d(t){t&&u(e),ge(l,t)}}}function We(n,e,s){let{cellScale:r=400}=e,{cellSize:l=100}=e,{getSrc:a}=e,{items:t=[]}=e;return n.$$set=o=>{"cellScale"in o&&s(0,r=o.cellScale),"cellSize"in o&&s(1,l=o.cellSize),"getSrc"in o&&s(2,a=o.getSrc),"items"in o&&s(3,t=o.items)},[r,l,a,t]}class Xe extends U{constructor(e){super();B(this,e,We,Qe,A,{cellScale:0,cellSize:1,getSrc:2,items:3})}}function Ye(n,e="body"){let s;async function r(a){if(e=a,typeof e=="string"){if(s=document.querySelector(e),s||(await ye(),s=document.querySelector(e)),!s)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)s=e;else throw new TypeError("Unknown portal target type. Allowed types: string ot istance of HTMLElement");s.appendChild(n),n.hidden=!1}function l(){n.parentElement&&n.parentElement.removeChild(n)}return r(e),{update:r,destroy:l}}function re(n){let e,s,r,l,a,t,o,i,c,f,b,m,G,h,O,X;t=new Te({props:{path:je,size:"1.25rem"}});const H=n[4].default,y=V(H,n,n[3],null);return{c(){e=v("div"),s=v("div"),l=L(),a=v("button"),N(t.$$.fragment),o=L(),i=v("div"),y&&y.c(),this.h()},l(_){e=E(_,"DIV",{class:!0,role:!0,"aria-modal":!0});var S=I(e);s=E(S,"DIV",{class:!0}),I(s).forEach(u),l=T(S),a=E(S,"BUTTON",{shape:!0});var Y=I(a);M(t.$$.fragment,Y),Y.forEach(u),o=T(S),i=E(S,"DIV",{class:!0});var Z=I(i);y&&y.l(Z),Z.forEach(u),S.forEach(u),this.h()},h(){k(s,"class",r=R.backdrop),k(a,"shape","square"),a.autofocus=!0,k(i,"class",c=R.contents),k(e,"class",f=R.modal),e.hidden=!0,k(e,"role","dialog"),k(e,"aria-modal","true")},m(_,S){w(_,e,S),z(e,s),z(e,l),z(e,a),P(t,a,null),z(e,o),z(e,i),y&&y.m(i,null),h=!0,a.focus(),O||(X=[j(s,"click",n[1]),j(a,"click",n[1]),we(b=Ye.call(null,e))],O=!0)},p(_,S){y&&y.p&&(!h||S&8)&&F(y,H,_,_[3],h?K(H,_[3],S,null):J(_[3]),null)},i(_){h||(d(t.$$.fragment,_),d(y,_),Se(()=>{G&&G.end(1),m=ve(e,le,{}),m.start()}),h=!0)},o(_){p(t.$$.fragment,_),p(y,_),m&&m.invalidate(),G=Ee(e,le,{}),h=!1},d(_){_&&u(e),C(t),y&&y.d(_),_&&G&&G.end(),O=!1,Ie(X)}}}function Ze(n){let e,s,r,l,a=n[0]&&re(n);return{c(){a&&a.c(),e=D()},l(t){a&&a.l(t),e=D()},m(t,o){a&&a.m(t,o),w(t,e,o),s=!0,r||(l=j(window,"keydown",n[2]),r=!0)},p(t,[o]){t[0]?a?(a.p(t,o),o&1&&d(a,1)):(a=re(t),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(ce(),p(a,1,1,()=>{a=null}),fe())},i(t){s||(d(a),s=!0)},o(t){p(a),s=!1},d(t){a&&a.d(t),t&&u(e),r=!1,l()}}}function $e(n,e,s){let{$$slots:r={},$$scope:l}=e;const a=ze();let{open:t=!1}=e;const o=()=>{s(0,t=!1),a("close")},i=c=>c.key==="Escape"&&o();return n.$$set=c=>{"open"in c&&s(0,t=c.open),"$$scope"in c&&s(3,l=c.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&qe(t)},[t,o,i,l,r]}class xe extends U{constructor(e){super();B(this,e,$e,Ze,A,{open:0})}}function et(n){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function tt(n){let e,s;const r=[{className:"modal-image"},{src:`${n[5].path}.${n[5].format}`},n[5]];let l={};for(let a=0;a<r.length;a+=1)l=q(l,r[a]);return e=new me({props:l}),{c(){N(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,t){P(e,a,t),s=!0},p(a,t){const o=t&6?Q(r,[r[0],{src:`${a[5].path}.${a[5].format}`},ue(a[5])]):{};e.$set(o)},i(a){s||(d(e.$$.fragment,a),s=!0)},o(a){p(e.$$.fragment,a),s=!1},d(a){C(e,a)}}}function lt(n){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function st(n){let e,s,r,l={ctx:n,current:null,token:null,hasCatch:!1,pending:lt,then:tt,catch:et,value:5,blocks:[,,,]};return se(s=n[2](n[1]),l),{c(){e=D(),l.block.c()},l(a){e=D(),l.block.l(a)},m(a,t){w(a,e,t),l.block.m(a,l.anchor=t),l.mount=()=>e.parentNode,l.anchor=e,r=!0},p(a,t){n=a,l.ctx=n,t&2&&s!==(s=n[2](n[1]))&&se(s,l)||Ne(l,n,t)},i(a){r||(d(l.block),r=!0)},o(a){for(let t=0;t<3;t+=1){const o=l.blocks[t];p(o)}r=!1},d(a){a&&u(e),l.block.d(a),l.token=null,l=null}}}function at(n){let e,s,r,l,a,t,o;return e=new Le({props:{route:"gallery"}}),l=new Xe({props:{items:n[0],getSrc:nt}}),t=new xe({props:{open:Boolean(n[1]),$$slots:{default:[st]},$$scope:{ctx:n}}}),t.$on("close",n[4]),{c(){N(e.$$.fragment),s=L(),r=v("main"),N(l.$$.fragment),a=L(),N(t.$$.fragment),this.h()},l(i){M(e.$$.fragment,i),s=T(i),r=E(i,"MAIN",{class:!0});var c=I(r);M(l.$$.fragment,c),c.forEach(u),a=T(i),M(t.$$.fragment,i),this.h()},h(){k(r,"class","svelte-zk6vcg")},m(i,c){P(e,i,c),w(i,s,c),w(i,r,c),P(l,r,null),w(i,a,c),P(t,i,c),o=!0},p(i,[c]){const f={};c&1&&(f.items=i[0]),l.$set(f);const b={};c&2&&(b.open=Boolean(i[1])),c&66&&(b.$$scope={dirty:c,ctx:i}),t.$set(b)},i(i){o||(d(e.$$.fragment,i),d(l.$$.fragment,i),d(t.$$.fragment,i),o=!0)},o(i){p(e.$$.fragment,i),p(l.$$.fragment,i),p(t.$$.fragment,i),o=!1},d(i){C(e,i),i&&u(s),i&&u(r),C(l),i&&u(a),C(t,i)}}}const dt=async({fetch:n})=>{const e=await n("/api/photos.json"),s=await e.json();return e.ok?{props:{photos:s}}:{status:e.status,error:new Error("Could not load URL")}},nt=({path:n,format:e})=>`${n}.${e}`;function it(n,e,s){let r,l;oe(n,Ce,i=>s(3,l=i));let{photos:a=[]}=e;const t=async i=>await Ue(`/api/photos/${i}.json`),o=()=>window.history.go(-1);return n.$$set=i=>{"photos"in i&&s(0,a=i.photos)},n.$$.update=()=>{n.$$.dirty&8&&s(1,r=l.url.searchParams.get("id"))},[a,r,t,l,o]}class gt extends U{constructor(e){super();B(this,e,it,at,A,{photos:0})}}export{gt as default,dt as load};
